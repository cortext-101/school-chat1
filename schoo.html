<p>&lt;!DOCTYPE html&gt;</p><p>&lt;html lang="en"&gt;</p><p>&lt;head&gt;</p><p>&lt;meta charset="UTF-8"&gt;</p><p>&lt;title&gt;School Chat&lt;/title&gt;</p><p>&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;</p><p>&lt;script src="https://unpkg.com/@supabase/supabase-js"&gt;&lt;/script&gt;</p><p>&lt;script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"&gt;&lt;/script&gt;</p><p>&lt;style&gt;</p><p>body { margin:0; font-family:Arial,sans-serif; background:#1e1f22; color:white; }</p><p>header { background:#5865f2; padding:12px; text-align:center; font-size:22px; font-weight:bold; }</p><p>#container { display:flex; flex-direction:column; height:calc(100vh - 52px); }</p><p>#chatBox { flex:1; background:#2b2d31; padding:10px; overflow-y:auto; margin:10px; border-radius:8px; }</p><p>.msg { margin-bottom:6px; }</p><p>.me { color:#57f287; }</p><p>.them { color:#faa61a; }</p><p>#controls { display:flex; margin:10px; }</p><p>#controls input { flex:1; padding:10px; border-radius:5px; border:none; }</p><p>#controls button { margin-left:6px; padding:10px; border:none; border-radius:5px; background:#5865f2; color:white; cursor:pointer; }</p><p>#videoControls { display:flex; margin:10px; }</p><p>#videoControls button { margin-right:6px; padding:10px; border:none; border-radius:5px; background:#5865f2; color:white; cursor:pointer; }</p><p>#videoContainer { display:flex; flex-wrap:wrap; margin:10px; gap:10px; }</p><p>video { width:48%; border-radius:8px; background:black; }</p><p>@media(max-width:700px){ video{width:100%;} }</p><p>&lt;/style&gt;</p><p>&lt;/head&gt;</p><p>&lt;body&gt;</p><p><br></p><p>&lt;header&gt;School Chat&lt;/header&gt;</p><p><br></p><p>&lt;div id="container"&gt;</p><p>  &lt;div id="chatBox"&gt;&lt;/div&gt;</p><p>  &lt;div id="controls"&gt;</p><p>    &lt;input id="username" placeholder="Your name"&gt;</p><p>    &lt;input id="message" placeholder="Type message"&gt;</p><p>    &lt;button onclick="sendMessage()"&gt;Send&lt;/button&gt;</p><p>  &lt;/div&gt;</p><p>  &lt;div id="videoControls"&gt;</p><p>    &lt;button onclick="startVideo()"&gt;Start My Video&lt;/button&gt;</p><p>  &lt;/div&gt;</p><p>  &lt;div id="videoContainer"&gt;</p><p>    &lt;video id="myVideo" autoplay muted&gt;&lt;/video&gt;</p><p>  &lt;/div&gt;</p><p>&lt;/div&gt;</p><p><br></p><p>&lt;script&gt;</p><p>//// --- Supabase Setup --- ///</p><p>const SUPABASE_URL = 'YOUR_SUPABASE_URL';</p><p>const SUPABASE_KEY = 'YOUR_SUPABASE_ANON_KEY';</p><p>const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_KEY);</p><p><br></p><p>// Listen to new messages</p><p>async function subscribeMessages(){</p><p>  const { data } = await supabase</p><p>    .from('messages')</p><p>    .select('*')</p><p>    .order('created_at', { ascending:true });</p><p>  data.forEach(d=&gt;addMessage(`${d.username}: ${d.message}`, 'them'));</p><p><br></p><p>  supabase</p><p>    .from('messages')</p><p>    .on('INSERT', payload =&gt; {</p><p>      const msg = payload.new;</p><p>      addMessage(`${msg.username}: ${msg.message}`, 'them');</p><p>    }).subscribe();</p><p>}</p><p><br></p><p>// Send a message</p><p>async function sendMessage(){</p><p>  const username = document.getElementById('username').value || 'User';</p><p>  const message = document.getElementById('message').value.trim();</p><p>  if(!message) return;</p><p>  await supabase.from('messages').insert([{ username, message }]);</p><p>  addMessage(`Me: ${message}`, 'me');</p><p>  document.getElementById('message').value='';</p><p>}</p><p><br></p><p>// Display message in chat box</p><p>function addMessage(text, cls){</p><p>  const div = document.createElement('div');</p><p>  div.className = 'msg '+cls;</p><p>  div.innerText = text;</p><p>  document.getElementById('chatBox').appendChild(div);</p><p>  document.getElementById('chatBox').scrollTop = document.getElementById('chatBox').scrollHeight;</p><p>}</p><p><br></p><p>subscribeMessages();</p><p><br></p><p>//// --- PeerJS Video Setup --- ///</p><p>let peer;</p><p>let localStream;</p><p>let videoCalls = {};</p><p><br></p><p>peer = new Peer(Math.floor(Math.random()*10000).toString(), {</p><p>  host:'0.peerjs.com',</p><p>  port:443,</p><p>  secure:true</p><p>});</p><p><br></p><p>peer.on('open', id =&gt; addMessage('Your Peer ID: '+id,'me'));</p><p><br></p><p>// Handle incoming calls</p><p>peer.on('call', call=&gt;{</p><p>  if(localStream){</p><p>    call.answer(localStream);</p><p>  }</p><p>  call.on('stream', addVideo);</p><p>});</p><p><br></p><p>// Start local video and auto call known peers (optional: paste Peer IDs in console to test small groups)</p><p>async function startVideo(){</p><p>  localStream = await navigator.mediaDevices.getUserMedia({video:true,audio:true});</p><p>  document.getElementById('myVideo').srcObject = localStream;</p><p>  addMessage('Video started. Share your Peer ID with friends for video calls.','me');</p><p>}</p><p><br></p><p>// Add remote video</p><p>function addVideo(stream){</p><p>  const v=document.createElement('video');</p><p>  v.srcObject = stream;</p><p>  v.autoplay=true;</p><p>  document.getElementById('videoContainer').appendChild(v);</p><p>}</p><p>&lt;/script&gt;</p><p><br></p><p>&lt;/body&gt;</p><p>&lt;/html&gt;</p><p><br></p>